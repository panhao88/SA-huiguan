{"remainingRequest":"C:\\work\\workspace\\rock-ui\\node_modules\\thread-loader\\dist\\cjs.js!C:\\work\\workspace\\rock-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\work\\workspace\\rock-ui\\src\\http\\index.js","dependencies":[{"path":"C:\\work\\workspace\\rock-ui\\src\\http\\index.js","mtime":1610528534307},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBxcyBmcm9tICJxcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKaW1wb3J0IG5wcm9ncmVzcyBmcm9tICducHJvZ3Jlc3MnOwppbXBvcnQgIm5wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzIjsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOyAvLyDov5DooYznjq/looM6IOacrOWcsOeOr+WigzpkZXZscG1lbnQg5ZKM57q/5LiKKOeUn+S6pynnjq/looM6IHByb2R1Y3Rpb24KCnZhciBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nOyAvLyDliJvlu7rkuIDkuKpheGlvc+eahOWunuS+iwoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIC8vIOWfuuehgOi3r+W+hDog6ZyA6KaB5qC55o2u5b2T5YmN55qE6L+Q6KGM546v5aKD5p2l5Yik5patCiAgYmFzZVVSTDogJ2h0dHA6Ly8xOTIuMTY4LjEwLjk6ODA4MScsCiAgLy8gYmFzZVVSTDogaXNQcm9kdWN0aW9uID8gJ2h0dHA6Ly8xOTIuMTY4LjAuMjU6ODA4MScgOiAnL2FwaScsCiAgLy8g6LaF5pe25pe26Ze0CiAgdGltZW91dDogMTAwMDAwCn0pOyAvLyDor7fmsYLlpLTnsbvlnosKLy8gc2VydmljZS5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbIkNvbnRlbnQtVHlwZSJdID0gImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIKLy8g6K+35rGC5oum5oiqOiDmr4/kuIDmrKHlj5Hor7fmsYLpg73kvJrlgZrnmoTkuovmg4UKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBucHJvZ3Jlc3Muc3RhcnQoKTsgLy8g5YmN5ZCO56uv6Ym05p2DCiAgLy8gand0OiBKU09OIFdFQiBUT0tFTgogIC8vIOeZu+W9leaIkOWKn+S5i+WQjiDlkI7nq6/kvJrov5Tlm57kuIDkuKrku6TniYwKCiAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmFkbWluVG9rZW47CiAgY29uZmlnLmhlYWRlcnNbJ1BMQVRGT1JNJ10gPSAxOwoKICBpZiAodG9rZW4pIHsKICAgIC8vIOmcgOimgeWcqOivt+axguWktOW9k+S4rea3u+WKoHRva2VuCiAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gdG9rZW47CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgbnByb2dyZXNzLmRvbmUoKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKfSk7IC8vIOWTjeW6lOaLpuaIqjog5q+P5LiA5qyh5o6l5Y+j6L+U5Zue5pWw5o2u55qE5pe25YCZ6YO95Lya5YGa55qE5LqL5oOFCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogIG5wcm9ncmVzcy5kb25lKCk7CgogIGlmIChyZXMuaGVhZGVycy5hdXRob3JpemF0aW9uKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5Ub2tlbicsIHJlcy5oZWFkZXJzLmF1dGhvcml6YXRpb24pOwogIH0KCiAgcmV0dXJuIHJlcy5kYXRhOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgaWYgKGVyci5yZXNwb25zZSAmJiBlcnIucmVzcG9uc2Uuc3RhdHVzKSB7CiAgICAvLyDplJnor6/or7fmsYLnmoTnirbmgIHnoIEKICAgIHZhciBzdGF0dXMgPSBlcnIucmVzcG9uc2Uuc3RhdHVzOwoKICAgIGlmIChzdGF0dXMgPT09IDQwMCkgewogICAgICBNZXNzYWdlLmVycm9yKCflj4LmlbDplJnor68nKTsKICAgIH0KCiAgICBpZiAoc3RhdHVzID09PSA0MDEpIHsKICAgICAgTWVzc2FnZS5lcnJvcign55m75b2V6L+H5pyfLOivt+mHjeaWsOeZu+W9lScpOwogICAgfQoKICAgIGlmIChzdGF0dXMgPT09IDQwMykgewogICAgICBNZXNzYWdlLmVycm9yKCfmsqHmnInmnYPpmZAnKTsKICAgIH0KCiAgICBpZiAoc3RhdHVzID09PSA0MDQpIHsKICAgICAgTWVzc2FnZS5lcnJvcign5o6l5Y+j6Lev5b6E6ZSZ6K+vJyk7CiAgICB9CgogICAgaWYgKHN0YXR1cyA9PT0gNTAwKSB7CiAgICAgIE1lc3NhZ2UuZXJyb3IoJ+acjeWKoeWZqOWHuumUmScpOwogICAgfQoKICAgIGlmIChzdGF0dXMgPT09IDUwMykgewogICAgICBNZXNzYWdlLmVycm9yKCfmnI3liqHlmajlnKjnu7TmiqQnKTsKICAgIH0KICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsKCnNlcnZpY2UucmVxID0gZnVuY3Rpb24gKCkgewogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7CiAgICByZXR1cm4gc2VydmljZS5nZXQoYXJndW1lbnRzLmxlbmd0aCA8PSAwID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzBdKTsKICB9CgogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7CiAgICByZXR1cm4gc2VydmljZS5wb3N0KGFyZ3VtZW50cy5sZW5ndGggPD0gMCA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1swXSwgcXMuc3RyaW5naWZ5KGFyZ3VtZW50cy5sZW5ndGggPD0gMSA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1sxXSkpOwogIH0KfTsKCmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"sources":["C:/work/workspace/rock-ui/src/http/index.js"],"names":["axios","qs","router","nprogress","Message","isProduction","process","env","NODE_ENV","service","create","baseURL","timeout","interceptors","request","use","config","start","token","localStorage","adminToken","headers","err","done","Promise","reject","response","res","authorization","setItem","data","status","error","req","length","get","post","stringify"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAO,yBAAP;AACA,SAASC,OAAT,QAAwB,YAAxB,C,CAEA;;AACA,IAAMC,YAAY,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA9C,C,CAEA;;AACA,IAAMC,OAAO,GAAGT,KAAK,CAACU,MAAN,CAAa;AAC3B;AACAC,EAAAA,OAAO,EAAE,0BAFkB;AAG3B;AACA;AACAC,EAAAA,OAAO,EAAE;AALkB,CAAb,CAAhB,C,CAOA;AACA;AAEA;;AACAH,OAAO,CAACI,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAACC,MAAD,EAAY;AAC3Cb,EAAAA,SAAS,CAACc,KAAV,GAD2C,CAE3C;AACA;AACA;;AACA,MAAIC,KAAK,GAAGC,YAAY,CAACC,UAAzB;AACAJ,EAAAA,MAAM,CAACK,OAAP,CAAe,UAAf,IAA6B,CAA7B;;AACA,MAAIH,KAAJ,EAAW;AACT;AACAF,IAAAA,MAAM,CAACK,OAAP,CAAe,eAAf,IAAkCH,KAAlC;AACD;;AACD,SAAOF,MAAP;AACD,CAZD,EAYG,UAAAM,GAAG,EAAI;AACRnB,EAAAA,SAAS,CAACoB,IAAV;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeH,GAAf,CAAP;AACD,CAfD,E,CAgBA;;AACAb,OAAO,CAACI,YAAR,CAAqBa,QAArB,CAA8BX,GAA9B,CAAkC,UAACY,GAAD,EAAS;AACzCxB,EAAAA,SAAS,CAACoB,IAAV;;AACA,MAAGI,GAAG,CAACN,OAAJ,CAAYO,aAAf,EAA6B;AAC3BT,IAAAA,YAAY,CAACU,OAAb,CAAqB,YAArB,EAAkCF,GAAG,CAACN,OAAJ,CAAYO,aAA9C;AACD;;AACD,SAAOD,GAAG,CAACG,IAAX;AACD,CAND,EAMG,UAAAR,GAAG,EAAI;AACR,MAAIA,GAAG,CAACI,QAAJ,IAAgBJ,GAAG,CAACI,QAAJ,CAAaK,MAAjC,EAAyC;AACvC;AACA,QAAIA,MAAM,GAAGT,GAAG,CAACI,QAAJ,CAAaK,MAA1B;;AACA,QAAIA,MAAM,KAAK,GAAf,EAAoB;AAClB3B,MAAAA,OAAO,CAAC4B,KAAR,CAAc,MAAd;AACD;;AACD,QAAID,MAAM,KAAK,GAAf,EAAoB;AAClB3B,MAAAA,OAAO,CAAC4B,KAAR,CAAc,YAAd;AACD;;AACD,QAAID,MAAM,KAAK,GAAf,EAAoB;AAClB3B,MAAAA,OAAO,CAAC4B,KAAR,CAAc,MAAd;AACD;;AACD,QAAID,MAAM,KAAK,GAAf,EAAoB;AAClB3B,MAAAA,OAAO,CAAC4B,KAAR,CAAc,QAAd;AACD;;AACD,QAAID,MAAM,KAAK,GAAf,EAAoB;AAClB3B,MAAAA,OAAO,CAAC4B,KAAR,CAAc,OAAd;AACD;;AACD,QAAID,MAAM,KAAK,GAAf,EAAoB;AAClB3B,MAAAA,OAAO,CAAC4B,KAAR,CAAc,QAAd;AACD;AACF;;AACD,SAAOR,OAAO,CAACC,MAAR,CAAeH,GAAf,CAAP;AACD,CA9BD;;AA+BAb,OAAO,CAACwB,GAAR,GAAc,YAAqB;AACjC,MAAI,UAAOC,MAAP,KAAkB,CAAtB,EAAyB;AACvB,WAAOzB,OAAO,CAAC0B,GAAR,kDAAP;AACD;;AACD,MAAI,UAAOD,MAAP,KAAkB,CAAtB,EAAyB;AACvB,WAAOzB,OAAO,CAAC2B,IAAR,mDAAwBnC,EAAE,CAACoC,SAAH,kDAAxB,CAAP;AACD;AACF,CAPD;;AASA,eAAe5B,OAAf","sourcesContent":["import axios from 'axios'\r\nimport qs from \"qs\"\r\nimport router from \"../router\"\r\nimport nprogress from 'nprogress'\r\nimport \"nprogress/nprogress.css\"\r\nimport { Message } from 'element-ui'\r\n\r\n// 运行环境: 本地环境:devlpment 和线上(生产)环境: production\r\nconst isProduction = process.env.NODE_ENV === 'production'\r\n\r\n// 创建一个axios的实例\r\nconst service = axios.create({\r\n  // 基础路径: 需要根据当前的运行环境来判断\r\n  baseURL: 'http://192.168.10.9:8081',\r\n  // baseURL: isProduction ? 'http://192.168.0.25:8081' : '/api',\r\n  // 超时时间\r\n  timeout: 100000,\r\n})\r\n// 请求头类型\r\n// service.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\"\r\n\r\n// 请求拦截: 每一次发请求都会做的事情\r\nservice.interceptors.request.use((config) => {\r\n  nprogress.start()\r\n  // 前后端鉴权\r\n  // jwt: JSON WEB TOKEN\r\n  // 登录成功之后 后端会返回一个令牌\r\n  let token = localStorage.adminToken\r\n  config.headers['PLATFORM'] = 1\r\n  if (token) {\r\n    // 需要在请求头当中添加token\r\n    config.headers['Authorization'] = token\r\n  }\r\n  return config\r\n}, err => {\r\n  nprogress.done()\r\n  return Promise.reject(err)\r\n})\r\n// 响应拦截: 每一次接口返回数据的时候都会做的事情\r\nservice.interceptors.response.use((res) => {\r\n  nprogress.done()\r\n  if(res.headers.authorization){\r\n    localStorage.setItem('adminToken',res.headers.authorization)\r\n  }\r\n  return res.data\r\n}, err => {\r\n  if (err.response && err.response.status) {\r\n    // 错误请求的状态码\r\n    let status = err.response.status\r\n    if (status === 400) {\r\n      Message.error('参数错误')\r\n    }\r\n    if (status === 401) {\r\n      Message.error('登录过期,请重新登录')\r\n    }\r\n    if (status === 403) {\r\n      Message.error('没有权限')\r\n    }\r\n    if (status === 404) {\r\n      Message.error('接口路径错误')\r\n    }\r\n    if (status === 500) {\r\n      Message.error('服务器出错')\r\n    }\r\n    if (status === 503) {\r\n      Message.error('服务器在维护')\r\n    }\r\n  }\r\n  return Promise.reject(err)\r\n})\r\nservice.req = function (...params) {\r\n  if (params.length === 1) {\r\n    return service.get(params[0])\r\n  }\r\n  if (params.length === 2) {\r\n    return service.post(params[0], qs.stringify(params[1]))\r\n  }\r\n}\r\n\r\nexport default service"]}]}