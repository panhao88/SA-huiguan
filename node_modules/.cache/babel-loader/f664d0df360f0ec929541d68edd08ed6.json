{"remainingRequest":"C:\\work\\workspace\\rock-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\work\\workspace\\rock-ui\\src\\http\\index.js","dependencies":[{"path":"C:\\work\\workspace\\rock-ui\\src\\http\\index.js","mtime":1611110803940},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBxcyBmcm9tICJxcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKaW1wb3J0IG5wcm9ncmVzcyBmcm9tICducHJvZ3Jlc3MnOwppbXBvcnQgIm5wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzIjsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOyAvLyDov5DooYznjq/looM6IOacrOWcsOeOr+WigzpkZXZscG1lbnQg5ZKM57q/5LiKKOeUn+S6pynnjq/looM6IHByb2R1Y3Rpb24KCnZhciBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nOyAvLyDliJvlu7rkuIDkuKpheGlvc+eahOWunuS+iwoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIC8vIOWfuuehgOi3r+W+hDog6ZyA6KaB5qC55o2u5b2T5YmN55qE6L+Q6KGM546v5aKD5p2l5Yik5patCiAgYmFzZVVSTDogJ2h0dHA6Ly8xOTIuMTY4LjEyMy41Nzo4MDgxJywKICAvLyBiYXNlVVJMOiBpc1Byb2R1Y3Rpb24gPyAnaHR0cDovLzE5Mi4xNjguMC4yNTo4MDgxJyA6ICcvYXBpJywKICAvLyDotoXml7bml7bpl7QKICB0aW1lb3V0OiAxMDAwMDAKfSk7IC8vIOivt+axguWktOexu+WeiwovLyBzZXJ2aWNlLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsiQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIgovLyDor7fmsYLmi6bmiKo6IOavj+S4gOasoeWPkeivt+axgumDveS8muWBmueahOS6i+aDhQoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIG5wcm9ncmVzcy5zdGFydCgpOyAvLyDliY3lkI7nq6/pibTmnYMKICAvLyBqd3Q6IEpTT04gV0VCIFRPS0VOCiAgLy8g55m75b2V5oiQ5Yqf5LmL5ZCOIOWQjuerr+S8mui/lOWbnuS4gOS4quS7pOeJjAoKICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuYWRtaW5Ub2tlbjsKICBjb25maWcuaGVhZGVyc1snUExBVEZPUk0nXSA9IDE7CgogIGlmICh0b2tlbikgewogICAgLy8g6ZyA6KaB5Zyo6K+35rGC5aS05b2T5Lit5re75YqgdG9rZW4KICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSB0b2tlbjsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICBucHJvZ3Jlc3MuZG9uZSgpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsgLy8g5ZON5bqU5oum5oiqOiDmr4/kuIDmrKHmjqXlj6Pov5Tlm57mlbDmja7nmoTml7blgJnpg73kvJrlgZrnmoTkuovmg4UKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzKSB7CiAgbnByb2dyZXNzLmRvbmUoKTsKCiAgaWYgKHJlcy5oZWFkZXJzLmF1dGhvcml6YXRpb24pIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pblRva2VuJywgcmVzLmhlYWRlcnMuYXV0aG9yaXphdGlvbik7CiAgfQoKICByZXR1cm4gcmVzLmRhdGE7Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICBpZiAoZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5zdGF0dXMpIHsKICAgIC8vIOmUmeivr+ivt+axgueahOeKtuaAgeeggQogICAgdmFyIHN0YXR1cyA9IGVyci5yZXNwb25zZS5zdGF0dXM7CgogICAgaWYgKHN0YXR1cyA9PT0gNDAwKSB7CiAgICAgIE1lc3NhZ2UuZXJyb3IoJ+WPguaVsOmUmeivrycpOwogICAgfQoKICAgIGlmIChzdGF0dXMgPT09IDQwMSkgewogICAgICBNZXNzYWdlLmVycm9yKCfnmbvlvZXov4fmnJ8s6K+36YeN5paw55m75b2VJyk7CiAgICB9CgogICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7CiAgICAgIE1lc3NhZ2UuZXJyb3IoJ+ayoeacieadg+mZkCcpOwogICAgfQoKICAgIGlmIChzdGF0dXMgPT09IDQwNCkgewogICAgICBNZXNzYWdlLmVycm9yKCfmjqXlj6Pot6/lvoTplJnor68nKTsKICAgIH0KCiAgICBpZiAoc3RhdHVzID09PSA1MDApIHsKICAgICAgTWVzc2FnZS5lcnJvcign5pyN5Yqh5Zmo5Ye66ZSZJyk7CiAgICB9CgogICAgaWYgKHN0YXR1cyA9PT0gNTAzKSB7CiAgICAgIE1lc3NhZ2UuZXJyb3IoJ+acjeWKoeWZqOWcqOe7tOaKpCcpOwogICAgfQogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOwoKc2VydmljZS5yZXEgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsKICAgIHJldHVybiBzZXJ2aWNlLmdldChhcmd1bWVudHMubGVuZ3RoIDw9IDAgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbMF0pOwogIH0KCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHsKICAgIHJldHVybiBzZXJ2aWNlLnBvc3QoYXJndW1lbnRzLmxlbmd0aCA8PSAwID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzBdLCBxcy5zdHJpbmdpZnkoYXJndW1lbnRzLmxlbmd0aCA8PSAxID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzFdKSk7CiAgfQp9OwoKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["C:/work/workspace/rock-ui/src/http/index.js"],"names":["axios","qs","router","nprogress","Message","isProduction","process","env","NODE_ENV","service","create","baseURL","timeout","interceptors","request","use","config","start","token","localStorage","adminToken","headers","err","done","Promise","reject","response","res","authorization","setItem","data","status","error","req","length","get","post","stringify"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport qs from \"qs\"\r\nimport router from \"../router\"\r\nimport nprogress from 'nprogress'\r\nimport \"nprogress/nprogress.css\"\r\nimport { Message } from 'element-ui'\r\n\r\n// 运行环境: 本地环境:devlpment 和线上(生产)环境: production\r\nconst isProduction = process.env.NODE_ENV === 'production'\r\n\r\n// 创建一个axios的实例\r\nconst service = axios.create({\r\n  // 基础路径: 需要根据当前的运行环境来判断\r\n  baseURL: 'http://192.168.123.57:8081',\r\n  // baseURL: isProduction ? 'http://192.168.0.25:8081' : '/api',\r\n  // 超时时间\r\n  timeout: 100000,\r\n})\r\n// 请求头类型\r\n// service.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\"\r\n\r\n// 请求拦截: 每一次发请求都会做的事情\r\nservice.interceptors.request.use((config) => {\r\n  nprogress.start()\r\n  // 前后端鉴权\r\n  // jwt: JSON WEB TOKEN\r\n  // 登录成功之后 后端会返回一个令牌\r\n  let token = localStorage.adminToken\r\n  config.headers['PLATFORM'] = 1\r\n  if (token) {\r\n    // 需要在请求头当中添加token\r\n    config.headers['Authorization'] = token\r\n  }\r\n  return config\r\n}, err => {\r\n  nprogress.done()\r\n  return Promise.reject(err)\r\n})\r\n// 响应拦截: 每一次接口返回数据的时候都会做的事情\r\nservice.interceptors.response.use((res) => {\r\n  nprogress.done()\r\n  if(res.headers.authorization){\r\n    localStorage.setItem('adminToken',res.headers.authorization)\r\n  }\r\n  return res.data\r\n}, err => {\r\n  if (err.response && err.response.status) {\r\n    // 错误请求的状态码\r\n    let status = err.response.status\r\n    if (status === 400) {\r\n      Message.error('参数错误')\r\n    }\r\n    if (status === 401) {\r\n      Message.error('登录过期,请重新登录')\r\n    }\r\n    if (status === 403) {\r\n      Message.error('没有权限')\r\n    }\r\n    if (status === 404) {\r\n      Message.error('接口路径错误')\r\n    }\r\n    if (status === 500) {\r\n      Message.error('服务器出错')\r\n    }\r\n    if (status === 503) {\r\n      Message.error('服务器在维护')\r\n    }\r\n  }\r\n  return Promise.reject(err)\r\n})\r\nservice.req = function (...params) {\r\n  if (params.length === 1) {\r\n    return service.get(params[0])\r\n  }\r\n  if (params.length === 2) {\r\n    return service.post(params[0], qs.stringify(params[1]))\r\n  }\r\n}\r\n\r\nexport default service"]}]}