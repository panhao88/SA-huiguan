{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\src\\views\\rights\\Rights.vue?vue&type=style&index=0&id=355393f6&scoped=true&lang=scss&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\src\\views\\rights\\Rights.vue","mtime":1610333063792},{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY29tbWVudHMgewogIHdpZHRoOiA2MDBweDsKICBoZWlnaHQ6IDEwOXB4OwogIGJvcmRlcjogMXB4IHNvbGlkICNkY2RmZTY7CiAgcGFkZGluZzogNXB4OwogIGNvbG9yOiAjNjA2MjY2OwogIGZvbnQtc2l6ZTogaW5oZXJpdDsKICBvdXRsaW5lOiBub25lOwp9Cgo="},{"version":3,"sources":["Rights.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Rights.vue","sourceRoot":"src/views/rights","sourcesContent":["<template>\n  <div>\n    <el-row>\n      <el-col :span=\"24\">\n        <el-card>\n          <!-- 权限同步，刷新权限缓存，新增权限菜单 -->\n          <div style=\"white-space: nowrap\">\n            <el-button type=\"primary\" @click=\"synchron\" size=\"mini\"\n              >权限同步</el-button\n            >\n            <el-button type=\"primary\" @click=\"refresh\" size=\"mini\"\n              >刷新权限缓存</el-button\n            >\n            <el-button type=\"primary\" size=\"mini\" @click=\"dialog = true\"\n              >新增权限菜单</el-button\n            >\n          </div>\n          <el-table\n            :data=\"allmenu\"\n            style=\"width: 100%; margin-top: 20px\"\n            border\n            align=\"center\"\n          >\n            <el-table-column\n              type=\"expand\"\n              label=\"#\"\n              prop=\"pname\"\n              width=\"40\"\n              align=\"center\"\n            >\n              <template slot-scope=\"props\">\n                <div\n                  style=\"border-top: 1px solid #f2f2f2\"\n                  v-if=\"props.row.children && props.row.children.length > 0\"\n                >\n                  <div v-for=\"(item, index) in props.row.children\" :key=\"index\">\n                    <div\n                      style=\"\n                        display: flex;\n                        align-items: center;\n                        border-bottom: 1px solid #f2f2f2;\n                      \"\n                    >\n                      <div style=\"padding: 5px\">\n                        <el-tag\n                          style=\"width: 100%\"\n                          closable\n                          @close=\"handleClose1(props.row, item)\"\n                          >{{ item.pname }}\n                          <i\n                            @click=\"handleEdit(index,item)\"\n                            class=\"iconfont icon-xiugai\"\n                            style=\"font-size: 12px; padding-left: 5px\"\n                          ></i\n                        ></el-tag>\n                      </div>\n                      <div>\n                        <div\n                          v-for=\"(item1, index1) in item.children\"\n                          :key=\"index1\"\n                          style=\"display: flex; align-items: center\"\n                        >\n                          <div style=\"padding: 5px\">\n                            <el-tag\n                              style=\"width: 100%\"\n                              type=\"success\"\n                              closable\n                              @close=\"handleClose2(props.row, item1)\"\n                              >{{ item1.pname }}\n                              <i\n                                class=\"iconfont icon-xiugai\"\n                                style=\"font-size: 12px; padding-right: 5px\"\n                              ></i\n                            ></el-tag>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div v-else>暂无数据</div>\n              </template>\n            </el-table-column>\n            <el-table-column\n              label=\"编号\"\n              width=\"60\"\n              align=\"center\"\n              prop=\"id\"\n            ></el-table-column>\n            <el-table-column\n              label=\"菜单名称\"\n              width=\"160\"\n              align=\"center\"\n              prop=\"pname\"\n            ></el-table-column>\n            <el-table-column\n              label=\"请求地址\"\n              prop=\"actionKey\"\n              width=\"220\"\n              align=\"center\"\n            ></el-table-column>\n            <el-table-column\n              prop=\"viewPath\"\n              label=\"页面路径\"\n              width=\"280\"\n              align=\"center\"\n            ></el-table-column>\n            <el-table-column label=\"图标\" align=\"center\" width=\"80\">\n              <template slot-scope=\"gpropsp\">\n                <div>\n                  <i :class=\"gpropsp.row.icon\"></i>\n                </div>\n              </template>\n            </el-table-column>\n            <el-table-column\n              prop=\"remark\"\n              label=\"描述\"\n              align=\"center\"\n              :show-overflow-tooltip=\"true\"\n            ></el-table-column>\n            <!-- 操纵 -->\n            <el-table-column label=\"操作\" align=\"center\" width=\"280\">\n              <template slot-scope=\"scope\">\n                <el-tooltip content=\"编辑角色\" placement=\"top\">\n                  <el-button\n                    size=\"mini\"\n                    @click=\"handleEdit(scope.$index, scope.row)\"\n                    type=\"primary\"\n                  >\n                    <span>修改</span>\n                  </el-button>\n                </el-tooltip>\n                <el-tooltip content=\"删除角色\" placement=\"top\">\n                  <el-button\n                    size=\"mini\"\n                    type=\"danger\"\n                    @click=\"handleDelete(scope.$index, scope.row)\"\n                  >\n                    <span>删除</span>\n                  </el-button>\n                </el-tooltip>\n              </template>\n            </el-table-column>\n          </el-table>\n          <!-- 编辑用户角色 -->\n          <el-dialog\n            title=\"修改权限菜单\"\n            :visible.sync=\"dialogFormVisible\"\n            width=\"40%\"\n            :modal-append-to-body=\"false\"\n          >\n            <el-form :model=\"ruleForm\" ref=\"ruleForm\">\n              <el-form-item\n                label=\"权限名称\"\n                :label-width=\"formLabelWidth\"\n                prop=\"roleName\"\n              >\n                <el-input v-model=\"ruleForm.permissions\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"请求地址\" :label-width=\"formLabelWidth\">\n                <el-input v-model=\"ruleForm.address\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"页面路径\" :label-width=\"formLabelWidth\">\n                <el-input v-model=\"ruleForm.Thepath\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"菜单图标\" :label-width=\"formLabelWidth\">\n                <el-input v-model=\"ruleForm.icon\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"类型\" :label-width=\"formLabelWidth\">\n                <el-select v-model=\"ruleForm.type\" placeholder=\"请选择\">\n                  <el-option\n                    v-for=\"item in tolist\"\n                    :key=\"item.id\"\n                    :value=\"item.id\"\n                    :label=\"item.name\"\n                  >\n                  </el-option>\n                </el-select>\n              </el-form-item>\n              <el-form-item label=\"上级菜单\" :label-width=\"formLabelWidth\">\n                <el-input v-model=\"ruleForm.pid\"></el-input>\n                <!-- <el-cascader\n                  expand-trigger=\"hover\"\n                  :options=\"list\"\n                  v-model=\"ruleForm.pid\"\n                  @change=\"handleChange\"\n                  :props=\"selectProps\"\n                >\n                </el-cascader>\n                <el-cascader\n                  :options=\"options\"\n                  :props=\"{ checkStrictly: true }\"\n                  clearable\n                ></el-cascader> -->\n              </el-form-item>\n              <el-form-item label=\"权限描述\" :label-width=\"formLabelWidth\">\n                <textarea\n                  class=\"comments\"\n                  v-model=\"ruleForm.vawenlue\"\n                  id=\"demo\"\n                >\n                </textarea>\n              </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"editor\">确 定</el-button>\n            </div>\n          </el-dialog>\n          <!-- 新增权限菜单 -->\n          <el-dialog\n            title=\"新增权限菜单\"\n            :visible.sync=\"dialog\"\n            width=\"40%\"\n            :modal-append-to-body=\"false\"\n          >\n            <el-form :model=\"validation\" ref=\"validation\" :rules=\"rules\">\n              <el-form-item\n                label=\"权限名称\"\n                :label-width=\"formLabelWidth\"\n                prop=\"permissions\"\n              >\n                <el-input v-model=\"validation.permissions\"></el-input>\n              </el-form-item>\n              <el-form-item\n                label=\"请求地址\"\n                :label-width=\"formLabelWidth\"\n                prop=\"address\"\n              >\n                <el-input v-model=\"validation.address\"></el-input>\n              </el-form-item>\n              <el-form-item\n                label=\"页面路径\"\n                :label-width=\"formLabelWidth\"\n                prop=\"Thepath\"\n              >\n                <el-input v-model=\"validation.Thepath\"></el-input>\n              </el-form-item>\n              <el-form-item\n                label=\"菜单图标\"\n                :label-width=\"formLabelWidth\"\n                prop=\"icon\"\n              >\n                <el-input v-model=\"validation.icon\"></el-input>\n              </el-form-item>\n              <el-form-item\n                label=\"类型\"\n                :label-width=\"formLabelWidth\"\n                prop=\"type\"\n              >\n                <el-select v-model=\"validation.type\" placeholder=\"请选择\">\n                  <el-option\n                    v-for=\"item in tolist\"\n                    :key=\"item.id\"\n                    :value=\"item.id\"\n                    :label=\"item.name\"\n                  >\n                  </el-option>\n                </el-select>\n              </el-form-item>\n              <el-form-item label=\"上级菜单\" :label-width=\"formLabelWidth\">\n                  <el-input v-model=\"validation.pid\"></el-input>\n                <!-- <el-cascader\n                  style=\"width: 100%\"\n                  v-model=\"validation.pid\"\n                  :options=\"allmenu\"\n                  expandTrigger=\"hover\"\n                  :props=\"selectProps\"\n                  change-on-select\n                  clearable\n                ></el-cascader> -->\n              </el-form-item>\n              <el-form-item label=\"权限描述\" :label-width=\"formLabelWidth\">\n                <textarea\n                  class=\"comments\"\n                  v-model=\"validation.vawenlue\"\n                  id=\"demo\"\n                >\n                </textarea>\n              </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"dialog = false\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"confirm('validation')\"\n                >确 定</el-button\n              >\n            </div>\n          </el-dialog>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport { createNamespacedHelpers } from \"vuex\";\nconst userModule = createNamespacedHelpers(\"user\");\nconst { mapState: userState, mapActions: userActions } = userModule;\nexport default {\n  name: \"\",\n  props: {},\n  components: {},\n  data() {\n    return {\n      dialogFormVisible: false, //编辑权限\n      dialog: false, //新增权限菜单\n      id: \"\", //编辑获取的id\n      ruleForm: {\n        permissions: \"\",\n        address: \"\",\n        Thepath: \"\",\n        icon: \"\",\n        type: \"\",\n        pid: \"\",\n        vawenlue: \"\",\n      },\n      selectProps: {\n        value: \"id\",\n        label: \"pname\",\n        disabled: true,\n        children: \"children\",\n      },\n      validation: {\n        permissions: \"\",\n        address: \"\",\n        Thepath: \"\",\n        icon: \"\",\n        type: \"\",\n        pid: \"\",\n        vawenlue: \"\",\n      },\n      rules: {\n        permissions: [\n          {\n            required: true,\n            message: \"权限名称不能为空\",\n            trigger: \"blur\",\n          },\n        ],\n        type: [\n          {\n            required: true,\n            message: \"权限名称不能为空\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n      tolist: [\n        {\n          id: 1,\n          name: \"菜单\",\n        },\n        {\n          id: 2,\n          name: \"按钮\",\n        },\n      ],\n      formLabelWidth: \"80px\",\n    };\n  },\n  methods: {\n    ...userActions([\n      \"getAllMenu\",\n      \"del\",\n      \"getupdate\",\n      \"synchronous\",\n      \"Therefresh\",\n      \"addpermissions\",\n    ]),\n    // 删除权限菜单\n    handleClose1(row, item) {\n      let id = item.id;\n      this.del({\n        id: id,\n      });\n    },\n    handleClose2(row, item1) {\n      let id = item1.id;\n      this.del({\n        id: id,\n      });\n    },\n    handleChange() {},\n    //删除权限\n    handleDelete(index, row) {\n      let id = row.id;\n      this.$confirm(\"此操作将永久删除该文件, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          this.del({\n            id: id,\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消删除\",\n          });\n        });\n    },\n    //编辑权限\n    handleEdit(index, row) {\n      this.id = row.id;\n      this.ruleForm.address = row.actionKey;\n      this.ruleForm.permissions = row.pname;\n      this.ruleForm.icon = row.icon;\n      if (row.ptype === \"1\") {\n        this.ruleForm.type = \"菜单\";\n      } else if (row.ptype === \"2\") {\n        this.ruleForm.type = \"按钮\";\n      }\n      this.ruleForm.vawenlue = row.remark;\n      this.dialogFormVisible = true;\n    },\n    // 权限同步\n    synchron() {\n      this.synchronous();\n    },\n    //刷新权限同步\n    refresh() {\n      this.Therefresh();\n    },\n    //新增权限菜单\n    confirm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.dialog = false;\n          this.addpermissions({\n            pname: this.validation.permissions,\n            actionKey: this.validation.address,\n            viewPath: this.validation.Thepath,\n            icon: this.validation.icon,\n            ptype: this.validation.type,\n            pid: this.validation.pid,\n            remark: this.validation.vawenlue,\n          });\n          (this.validation.permissions = \"\"),\n            (this.validation.address = \"\"),\n            (this.validation.Thepath = \"\"),\n            (this.validation.icon = \"\"),\n            (this.validation.type = \"\"),\n            (this.validation.pid = \"\"),\n            (this.validation.vawenlue = \"\");\n        } else {\n          return false;\n        }\n      });\n    },\n    // 分配权限\n    handleBelete(index, row) {},\n    //确认编辑权限\n    editor() {\n      let tyoelist = \"\";\n      if (this.ruleForm.type === \"菜单\") {\n        tyoelist = \"1\";\n      } else if (this.ruleForm.type === \"按钮\") {\n        tyoelist = \"2\";\n      }\n      this.getupdate({\n        pname: this.ruleForm.permissions,\n        actionKey: this.ruleForm.address,\n        viewPath: this.ruleForm.Thepath,\n        icon: this.ruleForm.icon,\n        ptype: tyoelist,\n        pid: this.ruleForm.pid,\n        remark: this.ruleForm.vawenlue,\n        id: this.id,\n      });\n      this.dialogFormVisible = false;\n    },\n  },\n  mounted() {\n    this.getAllMenu();\n  },\n  watch: {},\n  computed: {\n    ...userState([\"allmenu\", \"list\"]),\n  },\n};\n</script>\n\n<style scoped lang='scss'>\n.comments {\n  width: 600px;\n  height: 109px;\n  border: 1px solid #dcdfe6;\n  padding: 5px;\n  color: #606266;\n  font-size: inherit;\n  outline: none;\n}\n\n</style>"]}]}