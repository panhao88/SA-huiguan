{"remainingRequest":"C:\\work\\workspace\\rock-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\work\\workspace\\rock-ui\\src\\components\\tabs\\Tabs.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\work\\workspace\\rock-ui\\src\\components\\tabs\\Tabs.vue","mtime":1610504327581},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ2xpY2tvdXRzaWRlIGZyb20gJ2VsZW1lbnQtdWkvc3JjL3V0aWxzL2NsaWNrb3V0c2lkZScNCmltcG9ydCB7IG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZScNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJycsDQogIHByb3BzOiB7fSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgYWN0aXZlTmFtZTogJycsDQogICAgICB0b3A6IDAsDQogICAgICBsZWZ0OiAwLA0KICAgICAgc2hvd01lbnU6IGZhbHNlDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgZHJhZ2dhYmxlDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBNdXRhdGlvbnMoWydzZXRUYWJMaXN0J10pLA0KICAgIGhhbmRsZUNsaWNrKHRhYiwgaW5kZXgpIHsNCiAgICAgIGxldCByb3V0ZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnRhYkxpc3QuZmluZChpdGVtID0+IGl0ZW0ubmFtZSA9PT0gdGFiLm5hbWUpDQogICAgICB0aGlzLmFjdGl2ZU5hbWUgPSB0YWIubmFtZQ0KICAgICAgaWYgKHRoaXMuJHJvdXRlLm1ldGEudGl0bGUgIT09IHRhYi5uYW1lKSB0aGlzLiRyb3V0ZXIucHVzaChyb3V0ZS51cmwpDQogICAgfSwNCiAgICBjaGFuZ2UoZSkgew0KICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpDQogICAgfSwNCiAgICBjb250ZXh0bWVudShlKSB7DQogICAgICBlLnByZXZlbnREZWZhdWx0KCkNCiAgICAgIHRoaXMuc2hvd01lbnUgPSB0cnVlDQogICAgICB0aGlzLmxlZnQgPSBlLnBhZ2VYDQogICAgICB0aGlzLnRvcCA9IGUucGFnZVkNCiAgICB9LA0KICAgIGhhbmRsZUNsaWNrT3V0c2lkZSgpIHsNCiAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQ0KICAgIH0sDQogICAgY2xvc2UoZSkgew0KICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKQ0KICAgICAgbG9jYWxTdG9yYWdlLnRhYkxpc3QgPSBbXQ0KICAgICAgaWYgKHRoaXMudGFiTGlzdC5sZW5ndGggPT09IDEgJiYgdGhpcy50YWJMaXN0WzBdLm5hbWUgIT09ICfpppbpobUnKSB7DQogICAgICAgIGxldCBhcnIgPSBbDQogICAgICAgICAgew0KICAgICAgICAgICAgbmFtZTogJ+mmlumhtScsDQogICAgICAgICAgICB1cmw6ICcvJw0KICAgICAgICAgIH0NCiAgICAgICAgXQ0KICAgICAgICB0aGlzLnNldFRhYkxpc3QoYXJyKQ0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFiTGlzdCcsIEpTT04uc3RyaW5naWZ5KGFycikpDQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJykNCiAgICAgIH0NCiAgICAgIGxldCBhcnIgPSB0aGlzLnRhYkxpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5uYW1lICE9PSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlKQ0KICAgICAgbGV0IGluZGV4ID0gdGhpcy50YWJMaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0ubmFtZSA9PSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlKQ0KICAgICAgaWYgKHRoaXMudGFiTGlzdC5sZW5ndGggPiAxKSB7DQogICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy50YWJMaXN0Lmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICBsZXQgdXJsID0gdGhpcy50YWJMaXN0W2luZGV4IC0gMV0udXJsDQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2godXJsKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGxldCB1cmwgPSB0aGlzLnRhYkxpc3RbaW5kZXggKyAxXS51cmwNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh1cmwpDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5zZXRUYWJMaXN0KGFycikNCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RhYkxpc3QnLCBKU09OLnN0cmluZ2lmeShhcnIpKQ0KICAgICAgfQ0KICAgIH0sDQogICAgY2xvc2VPdGhlcigpIHsNCiAgICAgIGxvY2FsU3RvcmFnZS50YWJMaXN0ID0gW10NCiAgICAgIGxldCBhcnIgPSB0aGlzLnRhYkxpc3QuZmlsdGVyKA0KICAgICAgICBpdGVtID0+IGl0ZW0ubmFtZSA9PT0gdGhpcy4kcm91dGUubWV0YS50aXRsZQ0KICAgICAgKQ0KICAgICAgdGhpcy5zZXRUYWJMaXN0KGFycikNCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YWJMaXN0JywgSlNPTi5zdHJpbmdpZnkoYXJyKSkNCiAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQ0KICAgIH0sDQogICAgY2xvc2VMZWZ0KCkgew0KICAgICAgbG9jYWxTdG9yYWdlLnRhYkxpc3QgPSBbXQ0KICAgICAgbGV0IGluZGV4ID0gdGhpcy50YWJMaXN0LmZpbmRJbmRleCgNCiAgICAgICAgaXRlbSA9PiBpdGVtLm5hbWUgPT0gdGhpcy4kcm91dGUubWV0YS50aXRsZQ0KICAgICAgKQ0KICAgICAgaWYgKGluZGV4ID09PSAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+W3sue7j+aYr+esrOS4gOS4quWVpicpDQogICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbGV0IGFyciA9IHRoaXMudGFiTGlzdC5maWx0ZXIoKGl0ZW0sIGlkeCkgPT4gaWR4ID49IGluZGV4KQ0KICAgICAgICB0aGlzLnNldFRhYkxpc3QoYXJyKQ0KICAgICAgICB0aGlzLnNob3dNZW51ID0gZmFsc2UNCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RhYkxpc3QnLCBKU09OLnN0cmluZ2lmeShhcnIpKQ0KICAgICAgfQ0KICAgIH0sDQogICAgY2xvc2VSaWdodCgpIHsNCiAgICAgIGxvY2FsU3RvcmFnZS50YWJMaXN0ID0gW10NCiAgICAgIGxldCBpbmRleCA9IHRoaXMudGFiTGlzdC5maW5kSW5kZXgoDQogICAgICAgIGl0ZW0gPT4gaXRlbS5uYW1lID09IHRoaXMuJHJvdXRlLm1ldGEudGl0bGUNCiAgICAgICkNCiAgICAgIGlmIChpbmRleCA9PT0gdGhpcy50YWJMaXN0Lmxlbmd0aCAtIDEpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5bey57uP5piv5pyA5ZCO5LiA5Liq5ZWmJykNCiAgICAgICAgdGhpcy5zaG93TWVudSA9IGZhbHNlDQogICAgICB9IGVsc2Ugew0KICAgICAgICBsZXQgYXJyID0gdGhpcy50YWJMaXN0LmZpbHRlcigoaXRlbSwgaWR4KSA9PiBpZHggPD0gaW5kZXgpDQogICAgICAgIHRoaXMuc2V0VGFiTGlzdChhcnIpDQogICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQ0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFiTGlzdCcsIEpTT04uc3RyaW5naWZ5KGFycikpDQogICAgICB9DQogICAgfQ0KICB9LA0KICBkaXJlY3RpdmVzOiB7DQogICAgQ2xpY2tvdXRzaWRlDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5hY3RpdmVOYW1lID0gdGhpcy4kcm91dGUubWV0YS50aXRsZQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHRhYkxpc3Q6IHsNCiAgICAgIGdldCgpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnRhYkxpc3QNCiAgICAgIH0sDQogICAgICBzZXQodmFsKSB7DQogICAgICAgIGxvY2FsU3RvcmFnZS50YWJMaXN0ID0gW10NCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RhYkxpc3QnLCBKU09OLnN0cmluZ2lmeSh2YWwpKQ0KICAgICAgICB0aGlzLnNldFRhYkxpc3QodmFsKQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAkcm91dGUodmFsKSB7DQogICAgICB0aGlzLmFjdGl2ZU5hbWUgPSB2YWwubWV0YS50aXRsZQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["Tabs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tabs.vue","sourceRoot":"src/components/tabs","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container\">\r\n      <draggable v-model=\"tabList\" class=\"drag\" @update=\"change\">\r\n        <div\r\n          v-for=\"(item, index) in tabList\"\r\n          :key=\"item.name\"\r\n          class=\"content\"\r\n          :class=\"{ active: activeName === item.name }\"\r\n          @click=\"handleClick(item, index)\"\r\n          @contextmenu=\"contextmenu\"\r\n        >\r\n          <div class=\"circle\" v-if=\"activeName === item.name\"></div>\r\n          <div class=\"item\" :class=\"{ pd: activeName === item.name }\">\r\n            <div class=\"name\">{{ item.name }}</div>\r\n            <div\r\n              v-if=\"(activeName === item.name && tabList.length > 1) || (tabList.length === 1 && item.name !=='首页')\"\r\n              class=\"close\"\r\n              @click=\"close\"\r\n            >\r\n              <i class=\"el-icon-close\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </draggable>\r\n    </div>\r\n    <div\r\n      class=\"menus\"\r\n      v-if=\"showMenu\"\r\n      v-clickoutside=\"handleClickOutside\"\r\n      :style=\"{ top: top + 'px', left: left + 'px' }\"\r\n    >\r\n      <div @click=\"closeOther\">关闭其他</div>\r\n      <div @click=\"closeLeft\">关闭左侧</div>\r\n      <div @click=\"closeRight\">关闭右侧</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Clickoutside from 'element-ui/src/utils/clickoutside'\r\nimport { mapMutations } from 'vuex'\r\nimport draggable from 'vuedraggable'\r\nexport default {\r\n  name: '',\r\n  props: {},\r\n  data() {\r\n    return {\r\n      activeName: '',\r\n      top: 0,\r\n      left: 0,\r\n      showMenu: false\r\n    }\r\n  },\r\n  components: {\r\n    draggable\r\n  },\r\n  methods: {\r\n    ...mapMutations(['setTabList']),\r\n    handleClick(tab, index) {\r\n      let route = this.$store.state.tabList.find(item => item.name === tab.name)\r\n      this.activeName = tab.name\r\n      if (this.$route.meta.title !== tab.name) this.$router.push(route.url)\r\n    },\r\n    change(e) {\r\n      e.preventDefault()\r\n    },\r\n    contextmenu(e) {\r\n      e.preventDefault()\r\n      this.showMenu = true\r\n      this.left = e.pageX\r\n      this.top = e.pageY\r\n    },\r\n    handleClickOutside() {\r\n      this.showMenu = false\r\n    },\r\n    close(e) {\r\n      e.stopPropagation()\r\n      localStorage.tabList = []\r\n      if (this.tabList.length === 1 && this.tabList[0].name !== '首页') {\r\n        let arr = [\r\n          {\r\n            name: '首页',\r\n            url: '/'\r\n          }\r\n        ]\r\n        this.setTabList(arr)\r\n        localStorage.setItem('tabList', JSON.stringify(arr))\r\n        this.$router.push('/')\r\n      }\r\n      let arr = this.tabList.filter(item => item.name !== this.$route.meta.title)\r\n      let index = this.tabList.findIndex(item => item.name == this.$route.meta.title)\r\n      if (this.tabList.length > 1) {\r\n        if (index === this.tabList.length - 1) {\r\n          let url = this.tabList[index - 1].url\r\n          this.$router.push(url)\r\n        } else {\r\n          let url = this.tabList[index + 1].url\r\n          this.$router.push(url)\r\n        }\r\n        this.setTabList(arr)\r\n        localStorage.setItem('tabList', JSON.stringify(arr))\r\n      }\r\n    },\r\n    closeOther() {\r\n      localStorage.tabList = []\r\n      let arr = this.tabList.filter(\r\n        item => item.name === this.$route.meta.title\r\n      )\r\n      this.setTabList(arr)\r\n      localStorage.setItem('tabList', JSON.stringify(arr))\r\n      this.showMenu = false\r\n    },\r\n    closeLeft() {\r\n      localStorage.tabList = []\r\n      let index = this.tabList.findIndex(\r\n        item => item.name == this.$route.meta.title\r\n      )\r\n      if (index === 0) {\r\n        this.$message.error('已经是第一个啦')\r\n        this.showMenu = false\r\n      } else {\r\n        let arr = this.tabList.filter((item, idx) => idx >= index)\r\n        this.setTabList(arr)\r\n        this.showMenu = false\r\n        localStorage.setItem('tabList', JSON.stringify(arr))\r\n      }\r\n    },\r\n    closeRight() {\r\n      localStorage.tabList = []\r\n      let index = this.tabList.findIndex(\r\n        item => item.name == this.$route.meta.title\r\n      )\r\n      if (index === this.tabList.length - 1) {\r\n        this.$message.error('已经是最后一个啦')\r\n        this.showMenu = false\r\n      } else {\r\n        let arr = this.tabList.filter((item, idx) => idx <= index)\r\n        this.setTabList(arr)\r\n        this.showMenu = false\r\n        localStorage.setItem('tabList', JSON.stringify(arr))\r\n      }\r\n    }\r\n  },\r\n  directives: {\r\n    Clickoutside\r\n  },\r\n  mounted() {\r\n    this.activeName = this.$route.meta.title\r\n  },\r\n  computed: {\r\n    tabList: {\r\n      get() {\r\n        return this.$store.state.tabList\r\n      },\r\n      set(val) {\r\n        localStorage.tabList = []\r\n        localStorage.setItem('tabList', JSON.stringify(val))\r\n        this.setTabList(val)\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    $route(val) {\r\n      this.activeName = val.meta.title\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  padding:5px;\r\n  border-bottom: 1px solid #eee;\r\n  .drag {\r\n    display: flex;\r\n  }\r\n  .content {\r\n    border: 1px solid #ddd;\r\n    font-size: 12px;\r\n    padding: 2px 10px;\r\n    margin-right: 5px;\r\n    display: flex;\r\n    align-items: center;\r\n    position: relative;\r\n    z-index: 1;\r\n    white-space:nowrap;\r\n    cursor: pointer;\r\n    .circle {\r\n      height: 8px;\r\n      width: 8px;\r\n      background: #fff;\r\n      border-radius: 50%;\r\n      margin-right: 5px;\r\n    }\r\n    .item {\r\n      position: relative;\r\n      .close {\r\n        z-index: 99;\r\n        position: absolute;\r\n        font-size: 12px;\r\n        top: 0;\r\n        right: -6px;\r\n        padding-right: 2px;\r\n        z-index: 2020;\r\n      }\r\n    }\r\n  }\r\n  .active {\r\n    background: #409eff;\r\n    color: #fff;\r\n  }\r\n  .pd {\r\n    padding-right: 10px;\r\n  }\r\n}\r\n.menus {\r\n  position: absolute;\r\n  background: #fff;\r\n  box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, 0.3);\r\n  color: #333;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  padding: 5px;\r\n  z-index: 9999;\r\n  cursor: pointer;\r\n  div {\r\n    padding: 7px 5px;\r\n    z-index: 9999;\r\n  }\r\n}\r\n</style>\r\n"]}]}