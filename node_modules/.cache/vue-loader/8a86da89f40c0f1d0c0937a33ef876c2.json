{"remainingRequest":"C:\\work\\workspace\\rock-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\work\\workspace\\rock-ui\\src\\components\\tabs\\Tabs.vue?vue&type=style&index=0&id=48e9bbf6&lang=scss&scoped=true&","dependencies":[{"path":"C:\\work\\workspace\\rock-ui\\src\\components\\tabs\\Tabs.vue","mtime":1610504327581},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\workspace\\rock-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5jb250YWluZXIgew0KICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICBkaXNwbGF5OiBmbGV4Ow0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBwYWRkaW5nOjVweDsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7DQogIC5kcmFnIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICB9DQogIC5jb250ZW50IHsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICBwYWRkaW5nOiAycHggMTBweDsNCiAgICBtYXJnaW4tcmlnaHQ6IDVweDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHotaW5kZXg6IDE7DQogICAgd2hpdGUtc3BhY2U6bm93cmFwOw0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAuY2lyY2xlIHsNCiAgICAgIGhlaWdodDogOHB4Ow0KICAgICAgd2lkdGg6IDhweDsNCiAgICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICBtYXJnaW4tcmlnaHQ6IDVweDsNCiAgICB9DQogICAgLml0ZW0gew0KICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgLmNsb3NlIHsNCiAgICAgICAgei1pbmRleDogOTk7DQogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICB0b3A6IDA7DQogICAgICAgIHJpZ2h0OiAtNnB4Ow0KICAgICAgICBwYWRkaW5nLXJpZ2h0OiAycHg7DQogICAgICAgIHotaW5kZXg6IDIwMjA7DQogICAgICB9DQogICAgfQ0KICB9DQogIC5hY3RpdmUgew0KICAgIGJhY2tncm91bmQ6ICM0MDllZmY7DQogICAgY29sb3I6ICNmZmY7DQogIH0NCiAgLnBkIHsNCiAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4Ow0KICB9DQp9DQoubWVudXMgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGJhY2tncm91bmQ6ICNmZmY7DQogIGJveC1zaGFkb3c6IDJweCAycHggM3B4IDAgcmdiYSgwLCAwLCAwLCAwLjMpOw0KICBjb2xvcjogIzMzMzsNCiAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICBmb250LXNpemU6IDEycHg7DQogIHBhZGRpbmc6IDVweDsNCiAgei1pbmRleDogOTk5OTsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBkaXYgew0KICAgIHBhZGRpbmc6IDdweCA1cHg7DQogICAgei1pbmRleDogOTk5OTsNCiAgfQ0KfQ0K"},{"version":3,"sources":["Tabs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tabs.vue","sourceRoot":"src/components/tabs","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container\">\r\n      <draggable v-model=\"tabList\" class=\"drag\" @update=\"change\">\r\n        <div\r\n          v-for=\"(item, index) in tabList\"\r\n          :key=\"item.name\"\r\n          class=\"content\"\r\n          :class=\"{ active: activeName === item.name }\"\r\n          @click=\"handleClick(item, index)\"\r\n          @contextmenu=\"contextmenu\"\r\n        >\r\n          <div class=\"circle\" v-if=\"activeName === item.name\"></div>\r\n          <div class=\"item\" :class=\"{ pd: activeName === item.name }\">\r\n            <div class=\"name\">{{ item.name }}</div>\r\n            <div\r\n              v-if=\"(activeName === item.name && tabList.length > 1) || (tabList.length === 1 && item.name !=='首页')\"\r\n              class=\"close\"\r\n              @click=\"close\"\r\n            >\r\n              <i class=\"el-icon-close\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </draggable>\r\n    </div>\r\n    <div\r\n      class=\"menus\"\r\n      v-if=\"showMenu\"\r\n      v-clickoutside=\"handleClickOutside\"\r\n      :style=\"{ top: top + 'px', left: left + 'px' }\"\r\n    >\r\n      <div @click=\"closeOther\">关闭其他</div>\r\n      <div @click=\"closeLeft\">关闭左侧</div>\r\n      <div @click=\"closeRight\">关闭右侧</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Clickoutside from 'element-ui/src/utils/clickoutside'\r\nimport { mapMutations } from 'vuex'\r\nimport draggable from 'vuedraggable'\r\nexport default {\r\n  name: '',\r\n  props: {},\r\n  data() {\r\n    return {\r\n      activeName: '',\r\n      top: 0,\r\n      left: 0,\r\n      showMenu: false\r\n    }\r\n  },\r\n  components: {\r\n    draggable\r\n  },\r\n  methods: {\r\n    ...mapMutations(['setTabList']),\r\n    handleClick(tab, index) {\r\n      let route = this.$store.state.tabList.find(item => item.name === tab.name)\r\n      this.activeName = tab.name\r\n      if (this.$route.meta.title !== tab.name) this.$router.push(route.url)\r\n    },\r\n    change(e) {\r\n      e.preventDefault()\r\n    },\r\n    contextmenu(e) {\r\n      e.preventDefault()\r\n      this.showMenu = true\r\n      this.left = e.pageX\r\n      this.top = e.pageY\r\n    },\r\n    handleClickOutside() {\r\n      this.showMenu = false\r\n    },\r\n    close(e) {\r\n      e.stopPropagation()\r\n      localStorage.tabList = []\r\n      if (this.tabList.length === 1 && this.tabList[0].name !== '首页') {\r\n        let arr = [\r\n          {\r\n            name: '首页',\r\n            url: '/'\r\n          }\r\n        ]\r\n        this.setTabList(arr)\r\n        localStorage.setItem('tabList', JSON.stringify(arr))\r\n        this.$router.push('/')\r\n      }\r\n      let arr = this.tabList.filter(item => item.name !== this.$route.meta.title)\r\n      let index = this.tabList.findIndex(item => item.name == this.$route.meta.title)\r\n      if (this.tabList.length > 1) {\r\n        if (index === this.tabList.length - 1) {\r\n          let url = this.tabList[index - 1].url\r\n          this.$router.push(url)\r\n        } else {\r\n          let url = this.tabList[index + 1].url\r\n          this.$router.push(url)\r\n        }\r\n        this.setTabList(arr)\r\n        localStorage.setItem('tabList', JSON.stringify(arr))\r\n      }\r\n    },\r\n    closeOther() {\r\n      localStorage.tabList = []\r\n      let arr = this.tabList.filter(\r\n        item => item.name === this.$route.meta.title\r\n      )\r\n      this.setTabList(arr)\r\n      localStorage.setItem('tabList', JSON.stringify(arr))\r\n      this.showMenu = false\r\n    },\r\n    closeLeft() {\r\n      localStorage.tabList = []\r\n      let index = this.tabList.findIndex(\r\n        item => item.name == this.$route.meta.title\r\n      )\r\n      if (index === 0) {\r\n        this.$message.error('已经是第一个啦')\r\n        this.showMenu = false\r\n      } else {\r\n        let arr = this.tabList.filter((item, idx) => idx >= index)\r\n        this.setTabList(arr)\r\n        this.showMenu = false\r\n        localStorage.setItem('tabList', JSON.stringify(arr))\r\n      }\r\n    },\r\n    closeRight() {\r\n      localStorage.tabList = []\r\n      let index = this.tabList.findIndex(\r\n        item => item.name == this.$route.meta.title\r\n      )\r\n      if (index === this.tabList.length - 1) {\r\n        this.$message.error('已经是最后一个啦')\r\n        this.showMenu = false\r\n      } else {\r\n        let arr = this.tabList.filter((item, idx) => idx <= index)\r\n        this.setTabList(arr)\r\n        this.showMenu = false\r\n        localStorage.setItem('tabList', JSON.stringify(arr))\r\n      }\r\n    }\r\n  },\r\n  directives: {\r\n    Clickoutside\r\n  },\r\n  mounted() {\r\n    this.activeName = this.$route.meta.title\r\n  },\r\n  computed: {\r\n    tabList: {\r\n      get() {\r\n        return this.$store.state.tabList\r\n      },\r\n      set(val) {\r\n        localStorage.tabList = []\r\n        localStorage.setItem('tabList', JSON.stringify(val))\r\n        this.setTabList(val)\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    $route(val) {\r\n      this.activeName = val.meta.title\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  padding:5px;\r\n  border-bottom: 1px solid #eee;\r\n  .drag {\r\n    display: flex;\r\n  }\r\n  .content {\r\n    border: 1px solid #ddd;\r\n    font-size: 12px;\r\n    padding: 2px 10px;\r\n    margin-right: 5px;\r\n    display: flex;\r\n    align-items: center;\r\n    position: relative;\r\n    z-index: 1;\r\n    white-space:nowrap;\r\n    cursor: pointer;\r\n    .circle {\r\n      height: 8px;\r\n      width: 8px;\r\n      background: #fff;\r\n      border-radius: 50%;\r\n      margin-right: 5px;\r\n    }\r\n    .item {\r\n      position: relative;\r\n      .close {\r\n        z-index: 99;\r\n        position: absolute;\r\n        font-size: 12px;\r\n        top: 0;\r\n        right: -6px;\r\n        padding-right: 2px;\r\n        z-index: 2020;\r\n      }\r\n    }\r\n  }\r\n  .active {\r\n    background: #409eff;\r\n    color: #fff;\r\n  }\r\n  .pd {\r\n    padding-right: 10px;\r\n  }\r\n}\r\n.menus {\r\n  position: absolute;\r\n  background: #fff;\r\n  box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, 0.3);\r\n  color: #333;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  padding: 5px;\r\n  z-index: 9999;\r\n  cursor: pointer;\r\n  div {\r\n    padding: 7px 5px;\r\n    z-index: 9999;\r\n  }\r\n}\r\n</style>\r\n"]}]}