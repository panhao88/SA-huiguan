{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\src\\components\\tabs\\Tabs.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\src\\components\\tabs\\Tabs.vue","mtime":1609728346123},{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\admin\\rock-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDbGlja291dHNpZGUgZnJvbSAnZWxlbWVudC11aS9zcmMvdXRpbHMvY2xpY2tvdXRzaWRlJwppbXBvcnQgeyBtYXBNdXRhdGlvbnMgfSBmcm9tICd2dWV4JwppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZScKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICcnLAogIHByb3BzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aXZlTmFtZTogJycsCiAgICAgIHRvcDogMCwKICAgICAgbGVmdDogMCwKICAgICAgc2hvd01lbnU6IGZhbHNlCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBkcmFnZ2FibGUKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcE11dGF0aW9ucyhbJ3NldFRhYkxpc3QnXSksCiAgICBoYW5kbGVDbGljayh0YWIsIGluZGV4KSB7CiAgICAgIGxldCByb3V0ZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnRhYkxpc3QuZmluZChpdGVtID0+IGl0ZW0ubmFtZSA9PT0gdGFiLm5hbWUpCiAgICAgIHRoaXMuYWN0aXZlTmFtZSA9IHRhYi5uYW1lCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlICE9PSB0YWIubmFtZSkgdGhpcy4kcm91dGVyLnB1c2gocm91dGUudXJsKQogICAgfSwKICAgIGNoYW5nZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgfSwKICAgIGNvbnRleHRtZW51KGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgIHRoaXMuc2hvd01lbnUgPSB0cnVlCiAgICAgIHRoaXMubGVmdCA9IGUucGFnZVgKICAgICAgdGhpcy50b3AgPSBlLnBhZ2VZCiAgICB9LAogICAgaGFuZGxlQ2xpY2tPdXRzaWRlKCkgewogICAgICB0aGlzLnNob3dNZW51ID0gZmFsc2UKICAgIH0sCiAgICBjbG9zZShlKSB7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgbG9jYWxTdG9yYWdlLnRhYkxpc3QgPSBbXQogICAgICBpZiAodGhpcy50YWJMaXN0Lmxlbmd0aCA9PT0gMSAmJiB0aGlzLnRhYkxpc3RbMF0ubmFtZSAhPT0gJ+mmlumhtScpIHsKICAgICAgICBsZXQgYXJyID0gWwogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiAn6aaW6aG1JywKICAgICAgICAgICAgdXJsOiAnLycKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgICAgdGhpcy5zZXRUYWJMaXN0KGFycikKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFiTGlzdCcsIEpTT04uc3RyaW5naWZ5KGFycikpCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQogICAgICB9CiAgICAgIGxldCBhcnIgPSB0aGlzLnRhYkxpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5uYW1lICE9PSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlKQogICAgICBsZXQgaW5kZXggPSB0aGlzLnRhYkxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5uYW1lID09IHRoaXMuJHJvdXRlLm1ldGEudGl0bGUpCiAgICAgIGlmICh0aGlzLnRhYkxpc3QubGVuZ3RoID4gMSkgewogICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy50YWJMaXN0Lmxlbmd0aCAtIDEpIHsKICAgICAgICAgIGxldCB1cmwgPSB0aGlzLnRhYkxpc3RbaW5kZXggLSAxXS51cmwKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHVybCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV0IHVybCA9IHRoaXMudGFiTGlzdFtpbmRleCArIDFdLnVybAogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2godXJsKQogICAgICAgIH0KICAgICAgICB0aGlzLnNldFRhYkxpc3QoYXJyKQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YWJMaXN0JywgSlNPTi5zdHJpbmdpZnkoYXJyKSkKICAgICAgfQogICAgfSwKICAgIGNsb3NlT3RoZXIoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS50YWJMaXN0ID0gW10KICAgICAgbGV0IGFyciA9IHRoaXMudGFiTGlzdC5maWx0ZXIoCiAgICAgICAgaXRlbSA9PiBpdGVtLm5hbWUgPT09IHRoaXMuJHJvdXRlLm1ldGEudGl0bGUKICAgICAgKQogICAgICB0aGlzLnNldFRhYkxpc3QoYXJyKQogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFiTGlzdCcsIEpTT04uc3RyaW5naWZ5KGFycikpCiAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQogICAgfSwKICAgIGNsb3NlTGVmdCgpIHsKICAgICAgbG9jYWxTdG9yYWdlLnRhYkxpc3QgPSBbXQogICAgICBsZXQgaW5kZXggPSB0aGlzLnRhYkxpc3QuZmluZEluZGV4KAogICAgICAgIGl0ZW0gPT4gaXRlbS5uYW1lID09IHRoaXMuJHJvdXRlLm1ldGEudGl0bGUKICAgICAgKQogICAgICBpZiAoaW5kZXggPT09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCflt7Lnu4/mmK/nrKzkuIDkuKrllaYnKQogICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQogICAgICB9IGVsc2UgewogICAgICAgIGxldCBhcnIgPSB0aGlzLnRhYkxpc3QuZmlsdGVyKChpdGVtLCBpZHgpID0+IGlkeCA+PSBpbmRleCkKICAgICAgICB0aGlzLnNldFRhYkxpc3QoYXJyKQogICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YWJMaXN0JywgSlNPTi5zdHJpbmdpZnkoYXJyKSkKICAgICAgfQogICAgfSwKICAgIGNsb3NlUmlnaHQoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS50YWJMaXN0ID0gW10KICAgICAgbGV0IGluZGV4ID0gdGhpcy50YWJMaXN0LmZpbmRJbmRleCgKICAgICAgICBpdGVtID0+IGl0ZW0ubmFtZSA9PSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlCiAgICAgICkKICAgICAgaWYgKGluZGV4ID09PSB0aGlzLnRhYkxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+W3sue7j+aYr+acgOWQjuS4gOS4quWVpicpCiAgICAgICAgdGhpcy5zaG93TWVudSA9IGZhbHNlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IGFyciA9IHRoaXMudGFiTGlzdC5maWx0ZXIoKGl0ZW0sIGlkeCkgPT4gaWR4IDw9IGluZGV4KQogICAgICAgIHRoaXMuc2V0VGFiTGlzdChhcnIpCiAgICAgICAgdGhpcy5zaG93TWVudSA9IGZhbHNlCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RhYkxpc3QnLCBKU09OLnN0cmluZ2lmeShhcnIpKQogICAgICB9CiAgICB9CiAgfSwKICBkaXJlY3RpdmVzOiB7CiAgICBDbGlja291dHNpZGUKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmFjdGl2ZU5hbWUgPSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlCiAgfSwKICBjb21wdXRlZDogewogICAgdGFiTGlzdDogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnRhYkxpc3QKICAgICAgfSwKICAgICAgc2V0KHZhbCkgewogICAgICAgIGxvY2FsU3RvcmFnZS50YWJMaXN0ID0gW10KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGFiTGlzdCcsIEpTT04uc3RyaW5naWZ5KHZhbCkpCiAgICAgICAgdGhpcy5zZXRUYWJMaXN0KHZhbCkKICAgICAgfQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZSh2YWwpIHsKICAgICAgdGhpcy5hY3RpdmVOYW1lID0gdmFsLm1ldGEudGl0bGUKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Tabs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tabs.vue","sourceRoot":"src/components/tabs","sourcesContent":["<template>\n  <div>\n    <div class=\"container\">\n      <draggable v-model=\"tabList\" class=\"drag\" @update=\"change\">\n        <div\n          v-for=\"(item, index) in tabList\"\n          :key=\"item.name\"\n          class=\"content\"\n          :class=\"{ active: activeName === item.name }\"\n          @click=\"handleClick(item, index)\"\n          @contextmenu=\"contextmenu\"\n        >\n          <div class=\"circle\" v-if=\"activeName === item.name\"></div>\n          <div class=\"item\" :class=\"{ pd: activeName === item.name }\">\n            <div class=\"name\">{{ item.name }}</div>\n            <div\n              v-if=\"(activeName === item.name && tabList.length > 1) || (tabList.length === 1 && item.name !=='首页')\"\n              class=\"close\"\n              @click=\"close\"\n            >\n              <i class=\"el-icon-close\"></i>\n            </div>\n          </div>\n        </div>\n      </draggable>\n    </div>\n    <div\n      class=\"menus\"\n      v-if=\"showMenu\"\n      v-clickoutside=\"handleClickOutside\"\n      :style=\"{ top: top + 'px', left: left + 'px' }\"\n    >\n      <div @click=\"closeOther\">关闭其他</div>\n      <div @click=\"closeLeft\">关闭左侧</div>\n      <div @click=\"closeRight\">关闭右侧</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Clickoutside from 'element-ui/src/utils/clickoutside'\nimport { mapMutations } from 'vuex'\nimport draggable from 'vuedraggable'\nexport default {\n  name: '',\n  props: {},\n  data() {\n    return {\n      activeName: '',\n      top: 0,\n      left: 0,\n      showMenu: false\n    }\n  },\n  components: {\n    draggable\n  },\n  methods: {\n    ...mapMutations(['setTabList']),\n    handleClick(tab, index) {\n      let route = this.$store.state.tabList.find(item => item.name === tab.name)\n      this.activeName = tab.name\n      if (this.$route.meta.title !== tab.name) this.$router.push(route.url)\n    },\n    change(e) {\n      e.preventDefault()\n    },\n    contextmenu(e) {\n      e.preventDefault()\n      this.showMenu = true\n      this.left = e.pageX\n      this.top = e.pageY\n    },\n    handleClickOutside() {\n      this.showMenu = false\n    },\n    close(e) {\n      e.stopPropagation()\n      localStorage.tabList = []\n      if (this.tabList.length === 1 && this.tabList[0].name !== '首页') {\n        let arr = [\n          {\n            name: '首页',\n            url: '/'\n          }\n        ]\n        this.setTabList(arr)\n        localStorage.setItem('tabList', JSON.stringify(arr))\n        this.$router.push('/')\n      }\n      let arr = this.tabList.filter(item => item.name !== this.$route.meta.title)\n      let index = this.tabList.findIndex(item => item.name == this.$route.meta.title)\n      if (this.tabList.length > 1) {\n        if (index === this.tabList.length - 1) {\n          let url = this.tabList[index - 1].url\n          this.$router.push(url)\n        } else {\n          let url = this.tabList[index + 1].url\n          this.$router.push(url)\n        }\n        this.setTabList(arr)\n        localStorage.setItem('tabList', JSON.stringify(arr))\n      }\n    },\n    closeOther() {\n      localStorage.tabList = []\n      let arr = this.tabList.filter(\n        item => item.name === this.$route.meta.title\n      )\n      this.setTabList(arr)\n      localStorage.setItem('tabList', JSON.stringify(arr))\n      this.showMenu = false\n    },\n    closeLeft() {\n      localStorage.tabList = []\n      let index = this.tabList.findIndex(\n        item => item.name == this.$route.meta.title\n      )\n      if (index === 0) {\n        this.$message.error('已经是第一个啦')\n        this.showMenu = false\n      } else {\n        let arr = this.tabList.filter((item, idx) => idx >= index)\n        this.setTabList(arr)\n        this.showMenu = false\n        localStorage.setItem('tabList', JSON.stringify(arr))\n      }\n    },\n    closeRight() {\n      localStorage.tabList = []\n      let index = this.tabList.findIndex(\n        item => item.name == this.$route.meta.title\n      )\n      if (index === this.tabList.length - 1) {\n        this.$message.error('已经是最后一个啦')\n        this.showMenu = false\n      } else {\n        let arr = this.tabList.filter((item, idx) => idx <= index)\n        this.setTabList(arr)\n        this.showMenu = false\n        localStorage.setItem('tabList', JSON.stringify(arr))\n      }\n    }\n  },\n  directives: {\n    Clickoutside\n  },\n  mounted() {\n    this.activeName = this.$route.meta.title\n  },\n  computed: {\n    tabList: {\n      get() {\n        return this.$store.state.tabList\n      },\n      set(val) {\n        localStorage.tabList = []\n        localStorage.setItem('tabList', JSON.stringify(val))\n        this.setTabList(val)\n      }\n    }\n  },\n  watch: {\n    $route(val) {\n      this.activeName = val.meta.title\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  margin-bottom: 10px;\n  display: flex;\n  align-items: center;\n  padding:5px;\n  border-bottom: 1px solid #eee;\n  .drag {\n    display: flex;\n  }\n  .content {\n    border: 1px solid #ddd;\n    font-size: 12px;\n    padding: 2px 10px;\n    margin-right: 5px;\n    display: flex;\n    align-items: center;\n    position: relative;\n    z-index: 1;\n    white-space:nowrap;\n    cursor: pointer;\n    .circle {\n      height: 8px;\n      width: 8px;\n      background: #fff;\n      border-radius: 50%;\n      margin-right: 5px;\n    }\n    .item {\n      position: relative;\n      .close {\n        z-index: 99;\n        position: absolute;\n        font-size: 12px;\n        top: 0;\n        right: -6px;\n        padding-right: 2px;\n        z-index: 2020;\n      }\n    }\n  }\n  .active {\n    background: #409eff;\n    color: #fff;\n  }\n  .pd {\n    padding-right: 10px;\n  }\n}\n.menus {\n  position: absolute;\n  background: #fff;\n  box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, 0.3);\n  color: #333;\n  border-radius: 4px;\n  font-size: 12px;\n  padding: 5px;\n  z-index: 9999;\n  cursor: pointer;\n  div {\n    padding: 7px 5px;\n    z-index: 9999;\n  }\n}\n</style>\n"]}]}