{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\admin-ui\\src\\components\\tabs\\Tabs.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\admin-ui\\src\\components\\tabs\\Tabs.vue","mtime":1611123976416},{"path":"C:\\Users\\Administrator\\Desktop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\admin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ2xpY2tvdXRzaWRlIGZyb20gImVsZW1lbnQtdWkvc3JjL3V0aWxzL2NsaWNrb3V0c2lkZSI7DQppbXBvcnQgeyBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsNCmltcG9ydCBkcmFnZ2FibGUgZnJvbSAidnVlZHJhZ2dhYmxlIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIiIsDQogIHByb3BzOiB7fSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgYWN0aXZlTmFtZTogIiIsDQogICAgICB0b3A6IDAsDQogICAgICBsZWZ0OiAwLA0KICAgICAgc2hvd01lbnU6IGZhbHNlLA0KICAgIH07DQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBkcmFnZ2FibGUsDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBNdXRhdGlvbnMoWyJzZXRUYWJMaXN0Il0pLA0KICAgIGhhbmRsZUNsaWNrKHRhYiwgaW5kZXgpIHsNCiAgICAgIGxldCByb3V0ZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnRhYkxpc3QuZmluZCgNCiAgICAgICAgKGl0ZW0pID0+IGl0ZW0ubmFtZSA9PT0gdGFiLm5hbWUNCiAgICAgICk7DQogICAgICB0aGlzLmFjdGl2ZU5hbWUgPSB0YWIubmFtZTsNCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlICE9PSB0YWIubmFtZSkgdGhpcy4kcm91dGVyLnB1c2gocm91dGUudXJsKTsNCiAgICB9LA0KICAgIGNoYW5nZShlKSB7DQogICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgfSwNCiAgICBjb250ZXh0bWVudShlKSB7DQogICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICBpZiAodGhpcy4kcGFyZW50LiRwYXJlbnQuJHBhcmVudC4kcGFyZW50LmlzX2ZvbGQgPT09IGZhbHNlKSB7DQogICAgICAgIHRoaXMuc2hvd01lbnUgPSB0cnVlOw0KICAgICAgICB0aGlzLmxlZnQgPSBlLnBhZ2VYIC0gMjAwOw0KICAgICAgICB0aGlzLnRvcCA9IGUucGFnZVkgKyAyMDsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLiRwYXJlbnQuJHBhcmVudC4kcGFyZW50LiRwYXJlbnQuaXNfZm9sZCA9PT0gdHJ1ZSkgew0KICAgICAgICB0aGlzLnNob3dNZW51ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5sZWZ0ID0gZS5wYWdlWCAtIDY0Ow0KICAgICAgICB0aGlzLnRvcCA9IGUucGFnZVkgKyAyMDsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZUNsaWNrT3V0c2lkZSgpIHsNCiAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZTsNCiAgICB9LA0KICAgIGNsb3NlKGUpIHsNCiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICBsb2NhbFN0b3JhZ2UudGFiTGlzdCA9IFtdOw0KICAgICAgaWYgKHRoaXMudGFiTGlzdC5sZW5ndGggPT09IDEgJiYgdGhpcy50YWJMaXN0WzBdLm5hbWUgIT09ICLpppbpobUiKSB7DQogICAgICAgIGxldCBhcnIgPSBbDQogICAgICAgICAgew0KICAgICAgICAgICAgbmFtZTogIummlumhtSIsDQogICAgICAgICAgICB1cmw6ICIvIiwNCiAgICAgICAgICB9LA0KICAgICAgICBdOw0KICAgICAgICB0aGlzLnNldFRhYkxpc3QoYXJyKTsNCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRhYkxpc3QiLCBKU09OLnN0cmluZ2lmeShhcnIpKTsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsNCiAgICAgIH0NCiAgICAgIGxldCBhcnIgPSB0aGlzLnRhYkxpc3QuZmlsdGVyKA0KICAgICAgICAoaXRlbSkgPT4gaXRlbS5uYW1lICE9PSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlDQogICAgICApOw0KICAgICAgbGV0IGluZGV4ID0gdGhpcy50YWJMaXN0LmZpbmRJbmRleCgNCiAgICAgICAgKGl0ZW0pID0+IGl0ZW0ubmFtZSA9PSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlDQogICAgICApOw0KICAgICAgaWYgKHRoaXMudGFiTGlzdC5sZW5ndGggPiAxKSB7DQogICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy50YWJMaXN0Lmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICBsZXQgdXJsID0gdGhpcy50YWJMaXN0W2luZGV4IC0gMV0udXJsOw0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHVybCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbGV0IHVybCA9IHRoaXMudGFiTGlzdFtpbmRleCArIDFdLnVybDsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh1cmwpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMuc2V0VGFiTGlzdChhcnIpOw0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidGFiTGlzdCIsIEpTT04uc3RyaW5naWZ5KGFycikpOw0KICAgICAgfQ0KICAgIH0sDQogICAgY2xvc2VPdGhlcigpIHsNCiAgICAgIGxvY2FsU3RvcmFnZS50YWJMaXN0ID0gW107DQogICAgICBsZXQgYXJyID0gdGhpcy50YWJMaXN0LmZpbHRlcigNCiAgICAgICAgKGl0ZW0pID0+IGl0ZW0ubmFtZSA9PT0gdGhpcy4kcm91dGUubWV0YS50aXRsZQ0KICAgICAgKTsNCiAgICAgIHRoaXMuc2V0VGFiTGlzdChhcnIpOw0KICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRhYkxpc3QiLCBKU09OLnN0cmluZ2lmeShhcnIpKTsNCiAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZTsNCiAgICB9LA0KICAgIGNsb3NlTGVmdCgpIHsNCiAgICAgIGxvY2FsU3RvcmFnZS50YWJMaXN0ID0gW107DQogICAgICBsZXQgaW5kZXggPSB0aGlzLnRhYkxpc3QuZmluZEluZGV4KA0KICAgICAgICAoaXRlbSkgPT4gaXRlbS5uYW1lID09IHRoaXMuJHJvdXRlLm1ldGEudGl0bGUNCiAgICAgICk7DQogICAgICBpZiAoaW5kZXggPT09IDApIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5bey57uP5piv56ys5LiA5Liq5ZWmIik7DQogICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCBhcnIgPSB0aGlzLnRhYkxpc3QuZmlsdGVyKChpdGVtLCBpZHgpID0+IGlkeCA+PSBpbmRleCk7DQogICAgICAgIHRoaXMuc2V0VGFiTGlzdChhcnIpOw0KICAgICAgICB0aGlzLnNob3dNZW51ID0gZmFsc2U7DQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0YWJMaXN0IiwgSlNPTi5zdHJpbmdpZnkoYXJyKSk7DQogICAgICB9DQogICAgfSwNCiAgICBjbG9zZVJpZ2h0KCkgew0KICAgICAgbG9jYWxTdG9yYWdlLnRhYkxpc3QgPSBbXTsNCiAgICAgIGxldCBpbmRleCA9IHRoaXMudGFiTGlzdC5maW5kSW5kZXgoDQogICAgICAgIChpdGVtKSA9PiBpdGVtLm5hbWUgPT0gdGhpcy4kcm91dGUubWV0YS50aXRsZQ0KICAgICAgKTsNCiAgICAgIGlmIChpbmRleCA9PT0gdGhpcy50YWJMaXN0Lmxlbmd0aCAtIDEpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5bey57uP5piv5pyA5ZCO5LiA5Liq5ZWmIik7DQogICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCBhcnIgPSB0aGlzLnRhYkxpc3QuZmlsdGVyKChpdGVtLCBpZHgpID0+IGlkeCA8PSBpbmRleCk7DQogICAgICAgIHRoaXMuc2V0VGFiTGlzdChhcnIpOw0KICAgICAgICB0aGlzLnNob3dNZW51ID0gZmFsc2U7DQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0YWJMaXN0IiwgSlNPTi5zdHJpbmdpZnkoYXJyKSk7DQogICAgICB9DQogICAgfSwNCiAgfSwNCiAgZGlyZWN0aXZlczogew0KICAgIENsaWNrb3V0c2lkZSwNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmFjdGl2ZU5hbWUgPSB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlOw0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHRhYkxpc3Q6IHsNCiAgICAgIGdldCgpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnRhYkxpc3Q7DQogICAgICB9LA0KICAgICAgc2V0KHZhbCkgew0KICAgICAgICBsb2NhbFN0b3JhZ2UudGFiTGlzdCA9IFtdOw0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidGFiTGlzdCIsIEpTT04uc3RyaW5naWZ5KHZhbCkpOw0KICAgICAgICB0aGlzLnNldFRhYkxpc3QodmFsKTsNCiAgICAgIH0sDQogICAgfSwNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAkcm91dGUodmFsKSB7DQogICAgICB0aGlzLmFjdGl2ZU5hbWUgPSB2YWwubWV0YS50aXRsZTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Tabs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tabs.vue","sourceRoot":"src/components/tabs","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container\">\r\n      <draggable v-model=\"tabList\" class=\"drag\" @update=\"change\">\r\n        <div\r\n          v-for=\"(item, index) in tabList\"\r\n          :key=\"item.name\"\r\n          class=\"content\"\r\n          :class=\"{ active: activeName === item.name }\"\r\n          @click=\"handleClick(item, index)\"\r\n          @contextmenu=\"contextmenu\"\r\n        >\r\n          <div class=\"circle\" v-if=\"activeName === item.name\"></div>\r\n          <div class=\"item\" :class=\"{ pd: activeName === item.name }\">\r\n            <div class=\"name\">{{ item.name }}</div>\r\n            <div\r\n              v-if=\"\r\n                (activeName === item.name && tabList.length > 1) ||\r\n                (tabList.length === 1 && item.name !== '首页')\r\n              \"\r\n              class=\"close\"\r\n              @click=\"close\"\r\n            >\r\n              <i class=\"el-icon-close\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </draggable>\r\n    </div>\r\n    <div\r\n      class=\"menus\"\r\n      v-if=\"showMenu\"\r\n      v-clickoutside=\"handleClickOutside\"\r\n      :style=\"{ top: top + 'px', left: left + 'px' }\"\r\n    >\r\n      <div @click=\"closeOther\">关闭其他</div>\r\n      <div @click=\"closeLeft\">关闭左侧</div>\r\n      <div @click=\"closeRight\">关闭右侧</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Clickoutside from \"element-ui/src/utils/clickoutside\";\r\nimport { mapMutations } from \"vuex\";\r\nimport draggable from \"vuedraggable\";\r\nexport default {\r\n  name: \"\",\r\n  props: {},\r\n  data() {\r\n    return {\r\n      activeName: \"\",\r\n      top: 0,\r\n      left: 0,\r\n      showMenu: false,\r\n    };\r\n  },\r\n  components: {\r\n    draggable,\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"setTabList\"]),\r\n    handleClick(tab, index) {\r\n      let route = this.$store.state.tabList.find(\r\n        (item) => item.name === tab.name\r\n      );\r\n      this.activeName = tab.name;\r\n      if (this.$route.meta.title !== tab.name) this.$router.push(route.url);\r\n    },\r\n    change(e) {\r\n      e.preventDefault();\r\n    },\r\n    contextmenu(e) {\r\n      e.preventDefault();\r\n      if (this.$parent.$parent.$parent.$parent.is_fold === false) {\r\n        this.showMenu = true;\r\n        this.left = e.pageX - 200;\r\n        this.top = e.pageY + 20;\r\n      }\r\n      if (this.$parent.$parent.$parent.$parent.is_fold === true) {\r\n        this.showMenu = true;\r\n        this.left = e.pageX - 64;\r\n        this.top = e.pageY + 20;\r\n      }\r\n    },\r\n    handleClickOutside() {\r\n      this.showMenu = false;\r\n    },\r\n    close(e) {\r\n      e.stopPropagation();\r\n      localStorage.tabList = [];\r\n      if (this.tabList.length === 1 && this.tabList[0].name !== \"首页\") {\r\n        let arr = [\r\n          {\r\n            name: \"首页\",\r\n            url: \"/\",\r\n          },\r\n        ];\r\n        this.setTabList(arr);\r\n        localStorage.setItem(\"tabList\", JSON.stringify(arr));\r\n        this.$router.push(\"/\");\r\n      }\r\n      let arr = this.tabList.filter(\r\n        (item) => item.name !== this.$route.meta.title\r\n      );\r\n      let index = this.tabList.findIndex(\r\n        (item) => item.name == this.$route.meta.title\r\n      );\r\n      if (this.tabList.length > 1) {\r\n        if (index === this.tabList.length - 1) {\r\n          let url = this.tabList[index - 1].url;\r\n          this.$router.push(url);\r\n        } else {\r\n          let url = this.tabList[index + 1].url;\r\n          this.$router.push(url);\r\n        }\r\n        this.setTabList(arr);\r\n        localStorage.setItem(\"tabList\", JSON.stringify(arr));\r\n      }\r\n    },\r\n    closeOther() {\r\n      localStorage.tabList = [];\r\n      let arr = this.tabList.filter(\r\n        (item) => item.name === this.$route.meta.title\r\n      );\r\n      this.setTabList(arr);\r\n      localStorage.setItem(\"tabList\", JSON.stringify(arr));\r\n      this.showMenu = false;\r\n    },\r\n    closeLeft() {\r\n      localStorage.tabList = [];\r\n      let index = this.tabList.findIndex(\r\n        (item) => item.name == this.$route.meta.title\r\n      );\r\n      if (index === 0) {\r\n        this.$message.error(\"已经是第一个啦\");\r\n        this.showMenu = false;\r\n      } else {\r\n        let arr = this.tabList.filter((item, idx) => idx >= index);\r\n        this.setTabList(arr);\r\n        this.showMenu = false;\r\n        localStorage.setItem(\"tabList\", JSON.stringify(arr));\r\n      }\r\n    },\r\n    closeRight() {\r\n      localStorage.tabList = [];\r\n      let index = this.tabList.findIndex(\r\n        (item) => item.name == this.$route.meta.title\r\n      );\r\n      if (index === this.tabList.length - 1) {\r\n        this.$message.error(\"已经是最后一个啦\");\r\n        this.showMenu = false;\r\n      } else {\r\n        let arr = this.tabList.filter((item, idx) => idx <= index);\r\n        this.setTabList(arr);\r\n        this.showMenu = false;\r\n        localStorage.setItem(\"tabList\", JSON.stringify(arr));\r\n      }\r\n    },\r\n  },\r\n  directives: {\r\n    Clickoutside,\r\n  },\r\n  mounted() {\r\n    this.activeName = this.$route.meta.title;\r\n  },\r\n  computed: {\r\n    tabList: {\r\n      get() {\r\n        return this.$store.state.tabList;\r\n      },\r\n      set(val) {\r\n        localStorage.tabList = [];\r\n        localStorage.setItem(\"tabList\", JSON.stringify(val));\r\n        this.setTabList(val);\r\n      },\r\n    },\r\n  },\r\n  watch: {\r\n    $route(val) {\r\n      this.activeName = val.meta.title;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 5px;\r\n  border-bottom: 1px solid #eee;\r\n  .drag {\r\n    display: flex;\r\n  }\r\n  .content {\r\n    border: 1px solid #ddd;\r\n    font-size: 12px;\r\n    padding: 2px 10px;\r\n    margin-right: 5px;\r\n    display: flex;\r\n    align-items: center;\r\n    position: relative;\r\n    z-index: 1;\r\n    white-space: nowrap;\r\n    cursor: pointer;\r\n    .circle {\r\n      height: 8px;\r\n      width: 8px;\r\n      background: #fff;\r\n      border-radius: 50%;\r\n      margin-right: 5px;\r\n    }\r\n    .item {\r\n      position: relative;\r\n      .close {\r\n        z-index: 99;\r\n        position: absolute;\r\n        font-size: 12px;\r\n        top: 0;\r\n        right: -6px;\r\n        padding-right: 2px;\r\n        z-index: 2020;\r\n      }\r\n    }\r\n  }\r\n  .active {\r\n    background: #409eff;\r\n    color: #fff;\r\n  }\r\n  .pd {\r\n    padding-right: 10px;\r\n  }\r\n}\r\n.menus {\r\n  position: absolute;\r\n  background: #fff;\r\n  box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, 0.3);\r\n  color: #333;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  padding: 5px;\r\n  z-index: 9999;\r\n  cursor: pointer;\r\n  div {\r\n    padding: 7px 5px;\r\n    z-index: 9999;\r\n  }\r\n}\r\n</style>\r\n"]}]}